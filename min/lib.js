angular.module("myApp.controller",[]).controller("menuController",["$scope","report",function(t,e){$.getScript("menu-js/simplify/simplify.js"),$.getScript("menu-js/jquery.slimscroll.min.js"),$.getScript("menu-js/jquery.flot.min.js"),$.getScript("menu-js/simplify/simplify_dashboard.js"),t.userName=e.getUserLogin().user.username,t.organizationName=e.getUserLogin().user.organization.name}]),angular.module("myApp.controller").controller("accurateController",["$filter","$state","$scope","$rootScope","report",function(t,e,o,n,a){var i=a.getUserLogin().token;o.accurateSelect=[],a.accurateArray(i).then(function(t){console.log(t.data.result),o.accurateSelect=t.data.result.children,o.accurateSelect.unshift(t.data.result)}),o.select=1,o.accurateUserName="",o.accurateGet=function(){accurateGet={token:a.getUserLogin().token,staff:o.accurateUserName,staffOrgId:o.select,page:"0",start:"0",limit:"20"},a.accurateList(accurateGet).then(function(t){o.accurateNumber=10,o.accurateShouList=t.data.result,o.accuratePageTatal=Math.ceil(o.accurateShouList.length/o.accurateNumber)})},o.order=function(e,n){1==n?(console.log(e),o.isTrue=!1,o.accurateShouList=t("orderBy")(o.accurateShouList,e,o.isTrue)):-1==n&&(o.isTrue=!0,o.accurateShouList=t("orderBy")(o.accurateShouList,e,o.isTrue))},o.accurateLimit=0,o.accurateNowPage=1,o.accurateDown=function(){o.accurateNowPage<o.accuratePageTatal&&(o.accurateLimit=o.accurateLimit+o.accurateNumber,o.accurateNowPage=o.accurateNowPage+1)},o.accurateUp=function(){o.accurateLimit>0&&(o.accurateLimit=o.accurateLimit-o.accurateNumber,o.accurateNowPage=o.accurateNowPage-1)},o.accurateFirst=function(){o.accurateNowPage=1,o.accurateLimit=0},o.accurateLast=function(){o.accurateNowPage=o.accuratePageTatal,o.accurateLimit=(o.accuratePageTatal-1)*o.accurateNumber},o.accuratePageBack=function(){location.reload()}}]),angular.module("myApp.controller").controller("approvalController",["$filter","$scope","$rootScope","report",function(t,e,o,n){e.o={token:n.getUserLogin().token,staff:"",auditStatus:-1,page:1,start:0,limit:9},e.auditArr=[{i:"-1",v:"待审核"},{i:"1",v:"通过"},{i:"2",v:"拒绝"}],e.audit=e.auditArr[0],e.auditMake=function(t){e.o.auditStatus=t.i},e.order=function(o,n){1==n?(e.isTrue=!1,e.arr=t("orderBy")(e.arr,o,e.isTrue)):-1==n&&(e.isTrue=!0,e.arr=t("orderBy")(e.arr,o,e.isTrue))},e.getApprovalArr=function(t){n.approvalSearch(t).then(function(t){t.data.result.length?(e.arr=t.data.result,e.total=t.data.total-14,e.pageSum=Math.ceil(e.total/e.o.limit)):swal("查询信息不存在","请重新输入")},function(t){console.log(t)})},e.getApprovalArr(e.o),e.search=function(){e.o.page="1",e.o.start="0",e.o.staff=e.staff,e.getApprovalArr(e.o)},e.firstPage=function(){e.o.page="1",e.o.start="0",e.getApprovalArr(e.o)},e.prePage=function(){e.o.page>1&&(e.o.page--,e.o.start=(e.o.page-1)*e.o.limit,e.getApprovalArr(e.o))},e.nextPage=function(){e.o.page<e.pageSum&&(e.o.page++,e.o.start=(e.o.page-1)*e.o.limit,e.getApprovalArr(e.o))},e.lastPage=function(){e.o.page=e.pageSum,e.o.start=(e.o.page-1)*e.o.limit,e.getApprovalArr(e.o)},e.refreshPage=function(){e.o.page="1",e.o.start="0",e.getApprovalArr(e.o)},e.approvalMakeO={token:n.getUserLogin().token,eventId:"",status:"",content:""},e.approvalMake=function(t,o){e.approvalMakeO.eventId=o,e.approvalMakeO.status=t,swal({title:"意见",text:"请填写审批意见！",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Write something"},function(t){return!1!==t&&(""===t?(swal.showInputError("You need to write something!"),!1):(e.approvalMakeO.content=t,swal("审评成功!","You wrote: "+t,"success"),void n.approvalMake(e.approvalMakeO)))}),setTimeout(function(){e.getApprovalArr(e.o)},200)}}]),angular.module("myApp.controller").controller("combinationController",["$scope","$rootScope","report","$filter",function(t,e,o,n){t.o={token:o.getUserLogin().token,eventType:0,peopleCountMin:0,peopleCountMax:0,eventCreateTimeFrom:"",eventCreateTimeTo:"",eventTimeFrom:"",eventTimeTo:"",page:1,start:0,limit:9},t.eventTypeO=[{i:0,v:"全部"},{i:1,v:"婚嫁"},{i:2,v:"丧葬"}],t.peopleCountO=[{i:0,v:"全部"},{i:1,v:"0-50人"},{i:2,v:"50-100人"},{i:3,v:"100-150人"},{i:4,v:"150-200人"}],t.eventTypeDefault=t.eventTypeO[0],t.peopleCountDefault=t.peopleCountO[0],t.eventType=function(e){console.log(e.i),t.o.eventType=e.i},t.peopleCount=function(e){console.log(e.i),t.o.peopleCountMax=50*e.i,e.i>0?t.o.peopleCountMin=t.o.peopleCountMax-50:t.o.peopleCountMin=0,console.log(t.o)},t.total=0,t.pageSum=0,t.getCombinationArr=function(e){o.combination(e).then(function(e){t.initArr=e.data.result,t.arr=n("limitTo")(t.initArr,"9","0"),t.total=e.data.total,t.pageSum=Math.ceil(t.total/9)},function(t){console.log(t)})},t.order=function(e,o){1==o?(t.isTrue=!1,t.arr=n("orderBy")(t.arr,e,t.isTrue)):-1==o&&(t.isTrue=!0,t.arr=n("orderBy")(t.arr,e,t.isTrue))},t.combinationSearch=function(){t.o.eventCreateTimeFrom=n("date")(t.createTimeFrom,"yyyy-MM-dd"),t.o.eventCreateTimeTo=n("date")(t.createTimeTo,"yyyy-MM-dd"),t.o.eventTimeFrom=n("date")(t.timeFrom,"yyyy-MM-dd"),t.o.eventTimeTo=n("date")(t.timeTo,"yyyy-MM-dd"),t.getCombinationArr(t.o)},t.currentPageNum=1,t.firstPage=function(){t.currentPageNum=1,t.arr=n("limitTo")(t.initArr,"9",9*(t.currentPageNum-1))},t.prePage=function(){t.currentPageNum>1&&(t.currentPageNum--,t.arr=n("limitTo")(t.initArr,"9",9*(t.currentPageNum-1)))},t.nextPage=function(){console.log(234),console.log(t.currentPageNum),console.log(t.pageSum),t.currentPageNum<t.pageSum&&(t.currentPageNum++,console.log(t.currentPageNum),t.arr=n("limitTo")(t.initArr,"9",9*(t.currentPageNum-1)),console.log(t.arr))},t.lastPage=function(){t.currentPageNum=t.pageSum,t.arr=n("limitTo")(t.initArr,"9",9*(t.currentPageNum-1))},t.refreshPage=function(){t.currentPageNum=1,t.arr=n("limitTo")(t.initArr,"9",9*(t.currentPageNum-1))}}]),angular.module("myApp.controller").controller("dataController",["$filter","$state","$scope","$rootScope","report",function(t,e,o,n,a){o.dataList={token:a.getUserLogin().token,eventCreateTimeFrom:"",eventCreateTimeTo:"",eventTimeFrom:"",eventTimeTo:""},o.tab=function(t,e,o){var n=echarts.init(document.getElementById("main"));option={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["婚嫁","丧葬","平均次数"]},xAxis:[{type:"category",data:t,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"次数",min:0,max:2e3,interval:250,axisLabel:{formatter:"{value} "}}],series:[{name:"婚嫁",type:"bar",data:e},{name:"丧葬",type:"bar",data:o}]},n.setOption(option)},o.dataQuery=function(){o.dataTypeList=[],o.dataType1List=[],o.dataType2List=[],o.dataList.eventCreateTimeFrom=t("date")(o.createTimeFrom,"yyyy-MM-dd"),o.dataList.eventCreateTimeTo=t("date")(o.createTimeTo,"yyyy-MM-dd"),o.dataList.eventTimeFrom=t("date")(o.timeFrom,"yyyy-MM-dd"),o.dataList.eventTimeTo=t("date")(o.timeTo,"yyyy-MM-dd"),a.dataGet(o.dataList).then(function(t){for(var e=0;e<t.data.result.length;)o.dataTypeList.push(t.data.result[e].orgName),o.dataType1List.push(t.data.result[e].type1Count),o.dataType2List.push(t.data.result[e].type2Count),e++;o.tab(o.dataTypeList,o.dataType1List,o.dataType2List)})},o.dataQuery()}]),angular.module("myApp.controller").controller("loginController",["$state","$scope","$rootScope","report",function(t,e,o,n){e.loginAction=function(){n.login(e.userName,e.userPassword).then(function(e){console.log(e),e.data.result?(n.setUserLogin(e.data.result),t.go("menu.report")):(swal("用户名或密码错误","请重新输入"),t.go("login"))},function(t){console.log(t)})}}]),angular.module("myApp.controller").controller("notificationController",["$filter","$scope","$rootScope","report",function(t,e,o,n){e.o={token:n.getUserLogin().token,staff:"",page:1,start:0,limit:9},e.addO={token:n.getUserLogin().token,title:"",content:"",staff:"",staffOrgId:1},e.getNotificationInfo={token:n.getUserLogin().token,id:"",title:"",content:"",staff:"",staffOrgId:""},e.getNotificationArr=function(t){n.notificationList(t).then(function(t){t.data.result.length?(e.arr=t.data.result,e.total=t.data.total,e.pageSum=Math.ceil(e.total/e.o.limit)):swal("查询信息不存在","请重新输入")},function(t){console.log(t)})},e.order=function(o,n){1==n?(e.isTrue=!1,e.arr=t("orderBy")(e.arr,o,e.isTrue)):-1==n&&(e.isTrue=!0,e.arr=t("orderBy")(e.arr,o,e.isTrue))},e.getOrgIdArr=function(t,o){n.getOrgId(t).then(function(t){console.log(t.data.result),e.orgIdArr=t.data.result.children,e.orgIdArr.unshift({father:"father",id:t.data.result.id,name:t.data.result.name}),o?e.orgIdArr.some(function(t,n,a){return e.getOrgIdArrIndex=n,t.id==o}):e.getOrgIdArrIndex=o,e.orgIdOptions=e.orgIdArr[e.getOrgIdArrIndex]},function(t){console.log(t)})},e.notificationAdd=function(t){n.notificationAdd(t).then(function(t){console.log(t.data.result)},function(t){console.log(t)})},e.notificationDel=function(t){n.notificationDel(t).then(function(t){console.log(t.data.result)},function(t){console.log(t)})},e.getNotification=function(t){n.getNotification(t).then(function(t){e.getNotificationInfo.content=t.data.result.content,e.getNotificationInfo.staff=t.data.result.staff,e.getNotificationInfo.title=t.data.result.title,e.getNotificationInfo.staffOrgId=t.data.result.staffOrg.id,e.getOrgIdArr(e.o.token,e.getNotificationInfo.staffOrgId)},function(t){console.log(t)})},e.updateNotification=function(t){n.updateNotification(t).then(function(t){},function(t){console.log(t)})},e.orgIdSelect=function(t){console.log(t.id),e.addO.staffOrgId=t.id,e.getNotificationInfo.staffOrgId=t.id},e.getNotificationArr(e.o),e.search=function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)},e.add=function(){e.getOrgIdArr(e.o.token,0)},e.addOk=function(){e.notificationAdd(e.addO),setTimeout(function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)},200)},e.update=function(t){e.getNotificationInfo.id=t,e.getNotification({token:e.o.token,id:t})},e.updateOK=function(){e.updateNotification(e.getNotificationInfo),setTimeout(function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)},200)},e.del=function(t){e.notificationDel({token:e.o.token,id:t}),setTimeout(function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)},200),swal("删除成功","请重新输入","success")},e.firstPage=function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)},e.prePage=function(){e.o.page>1&&(e.o.page--,e.o.start=(e.o.page-1)*e.o.limit,e.getNotificationArr(e.o))},e.nextPage=function(){e.o.page<e.pageSum&&(e.o.page++,e.o.start=(e.o.page-1)*e.o.limit,e.getNotificationArr(e.o))},e.lastPage=function(){e.o.page=e.pageSum,e.o.start=(e.o.page-1)*e.o.limit,console.log(e.o.start),e.getNotificationArr(e.o)},e.refreshPage=function(){e.o.page="1",e.o.start="0",e.getNotificationArr(e.o)}}]),angular.module("myApp.controller").controller("publicityController",["$filter","$state","$scope","$rootScope","report",function(t,e,o,n,a){o.x="-1",o.nowPage=1,o.totalPage=1,o.publicityName="",o.publicityPage=0,o.publicityStart=0,o.publicityLimit=9,o.order=function(e,n){1==n?(o.isTrue=!1,o.showList=t("orderBy")(o.showList,e,o.isTrue)):-1==n&&(o.isTrue=!0,o.showList=t("orderBy")(o.showList,e,o.isTrue))},o.get=function(){publicityList={token:a.getUserLogin().token,staff:o.publicityName,bulletinStatus:o.x,page:o.publicityPage,start:o.publicityStart,limit:o.publicityLimit},a.showList(publicityList).then(function(t){console.log(t),o.showList=t.data.result,o.publicityTotal=t.data.total,o.totalPage=Math.ceil(t.data.total/o.publicityLimit)})},o.get(),o.publicityGet=function(){publicityList.page=1,publicityList.start=0,o.get(),o.publicityFirst()},o.publicityNext=function(){o.publicityStart<(o.totalPage-1)*o.publicityLimit&&(o.publicityStart=o.publicityStart+o.publicityLimit,o.get(),o.nowPage=o.nowPage+1)},o.publicityUp=function(){o.publicityStart>0&&(o.publicityStart=o.publicityStart-o.publicityLimit,o.get(),o.nowPage=o.nowPage-1)},o.publicityFirst=function(){o.publicityStart=0,o.get(),o.nowPage=1},o.publicityLast=function(){o.publicityStart=(o.totalPage-1)*o.publicityLimit,o.get(),o.nowPage=o.totalPage},o.showContent=function(t){o.id=t},o.content="",o.attachmentFileCode="",o.ContentUp=function(){o.showContentList={token:a.getUserLogin().token,eventId:o.id,content:o.content,attachmentFileCode:""},o.content?(a.showContentUp(o.showContentList).then(function(t){console.log(t)}),o.get(),swal("公示成功！","","success")):sweetAlert("内容不能为空！","Something went wrong!","error")},o.resultStatus="1",o.showResultContent="",o.resultUp=function(){o.showResultList={token:a.getUserLogin().token,eventId:o.id,status:o.resultStatus,content:o.showResultContent},console.log(o.showResultContent),o.showResultContent?(a.showResultUp(o.showResultList).then(function(t){console.log(t)}),o.get(),swal("公示结果成功！","","success")):sweetAlert("内容不能为空！","Something went wrong!","error")}}]),angular.module("myApp.controller").controller("punishController",["$filter","$state","$scope","$rootScope","$timeout","report",function(t,e,o,n,a,i){o.punishStaff="",o.punishPageLimit=10,o.punishPageStart=0,o.punishNowPage=1,o.punishGet={token:i.getUserLogin().token,staff:o.punishStaff,page:"0",start:o.punishPageStart,limit:o.punishPageLimit},o.punish=function(){i.punishList(o.punishGet).then(function(t){console.log(t.data),o.punishPageTotal=t.data.total,o.punishContentList=t.data.result,o.punishPage=Math.ceil(o.punishPageTotal/o.punishPageLimit)})},o.punish(),o.order=function(e,n){1==n?(o.isTrue=!1,o.punishContentList=t("orderBy")(o.punishContentList,e,o.isTrue)):-1==n&&(o.isTrue=!0,o.punishContentList=t("orderBy")(o.punishContentList,e,o.isTrue))},o.punishDownPage=function(){o.punishPageStart<=o.punishPageTotal-o.punishPageLimit&&(o.punishPageStart=o.punishPageStart+o.punishPageLimit,o.punish(),o.punishNowPage=o.punishNowPage+1)},o.punishUpPage=function(){o.punishPageStart>0&&(o.punishPageStart=o.punishPageStart-o.punishPageLimit,o.punish(),o.punishNowPage=o.punishNowPage-1)},o.punishFirstPage=function(){o.punishPageStart=0,o.punish(),o.punishNowPage=1},o.punishLastPage=function(){o.punishPageStart=(o.punishPage-1)*o.punishPageLimit,o.punish(),o.punishNowPage=o.punishPage},o.punishFind=function(){o.punishGet={token:i.getUserLogin().token,staff:o.punishStaff,page:"0",start:o.punishPageStart,limit:o.punishPageLimit},i.punishList(o.punishGet).then(function(t){console.log(t.data),o.punishPageTotal=t.data.total,o.punishContentList=t.data.result,o.punishPage=Math.ceil(o.punishPageTotal/o.punishPageLimit)})},o.punishAdd=function(){i.accurateArray(i.getUserLogin().token).then(function(t){console.log(t),o.punishSelect=t.data.result.children,o.punishSelect.unshift(t.data.result),console.log(o.punishSelect)}),o.punishSelectMake=1},o.punishAddStaff="",o.punishAddMake=function(){o.punishAddList={token:i.getUserLogin().token,title:o.punishTitle,content:o.punishContent,staff:o.punishAddStaff,staffOrgId:o.punishSelectMake},o.punishTitle&&o.punishContent&&o.punishAddStaff?(i.punishAddGet(o.punishAddList).then(function(t){console.log(t)}),swal("添加成功！","","success"),a(function(){o.punish()},500)):swal("内容不能为空!")},o.punishRevise=function(){console.log(this),console.log(this.punish.id),n.punishId=this.punish.id,i.accurateArray(i.getUserLogin().token).then(function(t){console.log(t),o.punishSelect=t.data.result.children,o.punishSelect.unshift(t.data.result),console.log(o.punishSelect)}),i.punishAllContent(i.getUserLogin().token,n.punishId).then(function(t){console.log(t.data.result),o.punishContent=t.data.result.content,o.punishTitle=t.data.result.title,o.punishStaff=t.data.result.staff,o.punishSelectMake=t.data.result.staffOrg.id,console.log(o.punishContent)}),o.punishMake=function(){punishUpDateList={token:i.getUserLogin().token,id:n.punishId,title:o.punishTitle,content:o.punishContent,staff:o.punishStaff,staffOrgId:o.punishSelectMake},console.log(punishUpDateList),i.punishUpDate(punishUpDateList).then(function(t){}),swal("修改成功！","","success"),a(function(){o.punish()},500)}},o.punishDelBut=function(){console.log(this.punish.id),o.punishId=this.punish.id,o.punishDelete=function(){i.punishDelete(i.getUserLogin().token,o.punishId).then(function(t){}),swal("删除成功！","","success"),o.punish()}}}]),angular.module("myApp.controller").controller("reportController",["$scope","report","$rootScope","$filter",function(t,e,o,n){t.o={token:e.getUserLogin().token,staff:"",staffRelationship:1,staffPoliticalStatus:"",staffJob:1,staffSpouse:"",staffPhone:"",eventType:1,eventCount:1,eventDate:"",location:"",tableCount:1,peopleCount:1,peopleRange:"",carCount:1,carSource:"",attachmentFileCode:"",selfPromise:"",promisePeople:"",staffOrgId:1},t.staffRelationshipArr=[{i:1,v:"本人"},{i:2,v:"直系亲属"}],t.rel=t.staffRelationshipArr[0],t.staffJobArr=[{i:1,v:"县级党员干部"},{i:2,v:"科级党员干部"},{i:3,v:"社区基层干部"},{i:4,v:"一般工作人员"}],t.job=t.staffJobArr[0],t.eventTypeArr=[{i:1,v:"婚嫁"},{i:2,v:"丧葬"}],t.event=t.eventTypeArr[0],function(){e.getOrgId(t.o.token).then(function(e){t.staffOrgIdArr=e.data.result.children,t.staffOrgIdArr.unshift({father:"father",id:e.data.result.id,name:e.data.result.name}),t.org=t.staffOrgIdArr[0]},function(t){console.log(t)})}(),t.staffRelationshipMake=function(e){t.o.staffRelationship=e.i},t.staffJobMake=function(e){t.o.staffJob=e.i},t.eventTypeMake=function(e){t.o.eventType=e.i},t.staffOrgIdMake=function(e){t.o.staffOrgId=e.id},t.reportSubmit=function(){if(t.report.$invalid)swal("请出入完整信息");else{if(t.initDate)t.o.eventDate=n("date")(t.initDate,"yyyy-MM-dd hh:mm:ss");else{var o=new Date;t.o.eventDate=n("date")(o,"yyyy-MM-dd hh:mm:ss")}e.report(t.o),swal("申报成功!","You clicked the button!","success")}}}]),angular.module("myApp.controller").controller("roleController",["$scope","$rootScope","report","$filter",function(t,e,o,n){t.o={token:o.getUserLogin().token,page:1,start:0,limit:9},t.getO={token:o.getUserLogin().token,roleId:""},t.deleteO={token:o.getUserLogin().token,id:""},t.getRoleArr=function(e){o.roleShow(e).then(function(e){console.log(e),t.arr=e.data.result,t.total=e.data.total,t.pageSum=Math.ceil(t.total/t.o.limit)},function(t){console.log(t)})},t.order=function(e,o){1==o?(t.isTrue=!1,t.arr=n("orderBy")(t.arr,e,t.isTrue)):-1==o&&(t.isTrue=!0,t.arr=n("orderBy")(t.arr,e,t.isTrue))},t.getRoleArr(t.o),t.getRoleInfo=function(e){o.getRole(e).then(function(e){console.log(e),t.modelCurrentRoleName=e.data.result.name,t.modelCurrentRoleId=e.data.result.id,t.modelCurrentArr=e.data.result.functions,t.modelArr=o.getUserLogin().user.role.functions,t.modelArr.forEach(function(e){e.isSelect=t.modelCurrentArr.some(function(t){return e.code==t.code})})},function(t){console.log(t)})},t.addRoleInfo=function(t){o.addRole(t).then(function(t){console.log(t)},function(t){console.log(t)})},t.addContent=function(){t.modelAddRoleName="",t.modelArr=o.getUserLogin().user.role.functions,console.log(o.getUserLogin())},t.submitContent=function(){t.updateStr="",t.modelArr.forEach(function(e){e.isSelect&&(t.updateStr=t.updateStr+"&functionCodes="+e.code)}),t.updateStr="?token="+t.getO.token+"&roleName="+t.modelAddRoleName+t.updateStr,console.log(t.updateStr),t.addRoleInfo(t.updateStr),setTimeout(function(){t.getRoleArr(t.o)},200)},t.showContent=function(e){t.getO.roleId=e,t.getRoleInfo(t.getO)},t.updateRoleInfo=function(t){o.updateRole(t).then(function(t){console.log(t)},function(t){console.log(t)})},t.getDeleteRole=function(t){o.deleteRole(t).then(function(t){console.log(t)},function(t){console.log(t)})},t.deleteRole=function(e){t.deleteO.id=e,t.getDeleteRole(t.deleteO),setTimeout(function(){t.getRoleArr(t.o)},200)},t.updateContent=function(){t.updateStr="",t.modelArr.forEach(function(e){e.isSelect&&(t.updateStr=t.updateStr+"&functionCodes="+e.code)}),t.updateStr="?token="+t.getO.token+"&roleId="+t.modelCurrentRoleId+"&roleName="+t.modelCurrentRoleName+t.updateStr,t.updateRoleInfo(t.updateStr),setTimeout(function(){t.getRoleArr(t.o)},200)},t.firstPage=function(){t.o.page="1",t.o.start="0",t.getRoleArr(t.o)},t.prePage=function(){t.o.page>1&&(t.o.page--,t.o.start=(t.o.page-1)*t.o.limit,t.getRoleArr(t.o))},t.nextPage=function(){t.o.page<t.pageSum&&(t.o.page++,t.o.start=(t.o.page-1)*t.o.limit,t.getRoleArr(t.o))},t.lastPage=function(){t.o.page=t.pageSum,t.o.start=(t.o.page-1)*t.o.limit,t.getRoleArr(t.o)},t.refreshPage=function(){t.o.page="1",t.o.start="0",t.getRoleArr(t.o)}}]),angular.module("myApp.controller").controller("supervisionController",["$filter","$state","$scope","$rootScope","report",function(t,e,o,n,a){o.auditArr=[{i:"-1",v:"未监督"},{i:"1",v:"已监督"}],o.audit=o.auditArr[0],o.auditMake=function(t){o.o.superviseStatus=t.i},o.order=function(e,n){1==n?(o.isTrue=!1,o.arr=t("orderBy")(o.arr,e,o.isTrue)):-1==n&&(o.isTrue=!0,o.arr=t("orderBy")(o.arr,e,o.isTrue))},o.o={token:a.getUserLogin().token,staff:"",superviseStatus:-1,page:1,start:0,limit:9},o.getSupervisionArr=function(t){a.supervisionSearch(t).then(function(t){t.data.result.length?(o.arr=t.data.result,-1==o.o.superviseStatus?o.total=t.data.total-725:o.total=t.data.total-59,o.pageSum=Math.ceil(o.total/o.o.limit)):swal("查询信息不存在","请重新输入")},function(t){console.log(t)})},o.getSupervisionArr(o.o),o.search=function(){o.o.page="1",o.o.start="0",o.o.staff=o.staff,o.getSupervisionArr(o.o)},o.firstPage=function(){o.o.page="1",o.o.start="0",o.getSupervisionArr(o.o)},o.prePage=function(){o.o.page>1&&(o.o.page--,o.o.start=(o.o.page-1)*o.o.limit,o.getSupervisionArr(o.o))},o.nextPage=function(){o.o.page<o.pageSum&&(o.o.page++,o.o.start=(o.o.page-1)*o.o.limit,o.getSupervisionArr(o.o))},o.lastPage=function(){o.o.page=o.pageSum,o.o.start=(o.o.page-1)*o.o.limit,console.log(o.o.start),o.getSupervisionArr(o.o)},o.refreshPage=function(){o.o.page="1",o.o.start="0",o.getSupervisionArr(o.o)},o.MakeO={token:a.getUserLogin().token,eventId:""},o.MakeTitleOKO={token:a.getUserLogin().token,eventId:"",title:"",content:""},o.MakeTitleNOO={token:a.getUserLogin().token,eventId:"",isCashGiftOutOfLimits:0,isUsePublicCar:0,isUsePublicGoods:0,isUsePublicAsserts:0,isUsePublicMoney:0,attachmentFileCode:"",otherQuestion:"",content:""},o.getId=function(t){o.MakeO.eventId=t,o.MakeTitleOKO.eventId=t,o.MakeTitleNOO.eventId=t},o.makeOk=function(){a.supervisionMakeOk(o.MakeO),a.supervisionMakeTitleOk(o.MakeTitleOKO),console.log(123),swal("报告填写完成!","success"),setTimeout(function(){o.getSupervisionArr(o.o)},200)},o.makeNO=function(){a.supervisionMakeNO(o.MakeO),a.supervisionMakeTitleNO(o.MakeTitleOKO),swal("违纪登记完成!","success"),setTimeout(function(){o.getSupervisionArr(o.o)},200)}}]),angular.module("myApp.controller").controller("userManageController",["$filter","$scope","report",function(t,e,o){e.order=function(o,n){1==n?(e.isTrue=!1,e.userManage=t("orderBy")(e.userManage,o,e.isTrue)):-1==n&&(e.isTrue=!0,e.userManage=t("orderBy")(e.userManage,o,e.isTrue))},e.dataList=9,e.userPageNow=1,e.userPageStart=1,e.refresh=function(){o.userManageData({token:o.getUserLogin().token,page:0,start:e.userPageStart,limit:e.dataList}).then(function(t){e.userTotal=t.data.total,e.userManage=t.data.result,e.userPageTotal=Math.ceil(e.userTotal/e.dataList)},function(t){console.log(t)})},e.refresh(),e.accurateFirst=function(){e.userPageNow=1,e.userPageStart=1,e.refresh()},e.accurateDown=function(){e.userPageNow<e.userPageTotal&&(e.userPageNow++,e.userPageStart=e.userPageStart+e.dataList,e.refresh())},e.accurateUp=function(){e.userPageNow>1&&(e.userPageNow--,e.userPageStart=e.userPageStart-e.dataList,e.refresh())},e.accurateLast=function(){e.userPageNow=e.userPageTotal,e.userPageStart=(e.userPageTotal-1)*e.dataList,e.refresh()},e.accuratePageBack=function(){e.refresh()},e.modify=function(){console.log(this),e.userId=this.user.id,e.dataModifyList={token:o.getUserLogin().token,userId:this.user.id,orgId:1,roleId:"",name:"",password:""},o.currentDepartment({token:o.getUserLogin().token}).then(function(t){e.department=t.data.result.children.unshift(t.data.result),e.department=t.data.result.children,console.log(e.department)},function(t){}),o.userRole({token:o.getUserLogin().token,roleId:this.user.id}).then(function(t){e.roles=t.data.result,console.log(e.roles)},function(t){}),o.userId({token:o.getUserLogin().token,userId:this.user.id}).then(function(t){e.dataModifyList.name=t.data.result.name,e.dataModifyList.username=t.data.result.username,e.dataModifyList.orgId=t.data.result.organization.id,e.dataModifyList.roleId=t.data.result.role.id,console.log(e.dataModifyList.roleId)},function(t){console.log(t)})},e.sureModify=function(){console.log(e.dataModifyList),o.sureModifyData(e.dataModifyList).then(function(t){e.refresh(),swal("修改成功!","","success")},function(t){console.log(t),swal("修改失败!","","error")})},e.sureDelete=function(){var t={token:o.getUserLogin().token,id:this.user.id};o.deleteUserInformation(t).then(function(t){console.log(t),swal("删除成功!","","success"),e.refresh()},function(t){console.log(t),swal("删除失败!","","error")})},e.newAdd=function(){e.addData={token:o.getUserLogin().token,orgId:1,username:"",name:"",password:"",roleId:""},e.addData.username="",e.addData.name="",e.addData.password="",e.addData.orgId=1,e.addData.roleId="",e.surePassword="",o.currentDepartment({token:o.getUserLogin().token}).then(function(t){e.department=t.data.result.children.unshift(t.data.result),e.department=t.data.result.children},function(t){}),o.userRole({token:o.getUserLogin().token,roleId:0}).then(function(t){e.roles=t.data.result},function(t){})},e.sureAdd=function(){o.addUser(e.addData).then(function(t){$("#myModal").modal("hide"),swal("添加成功!","","success"),e.addUserModal.$submitted=!1,e.refresh()},function(t){swal("添加失败!","","error")})}}]);